"use strict";function peg$subclass(e,r){function s(){this.constructor=e}s.prototype=r.prototype,e.prototype=new s}function peg$SyntaxError(e,r,s,o){this.message=e,this.expected=r,this.found=s,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(e,r){r=void 0!==r?r:{};var s,o={},n={Expression:U},t=U,i=M("⊕",!1),a=M("-",!1),p=M("↔",!1),c=M("→",!1),x=M("˅",!1),l=M("⋃",!1),d=M("+",!1),u=M("˄",!1),f=M("⋂",!1),v=M("*",!1),P=M("´",!1),h=M("(",!1),y=M(")",!1),g=Z("char"),A=/^[a-zA-Z\xF1\xD1]/,C=T([["a","z"],["A","Z"],"ñ","Ñ"],!1,!1),b=Z("whitespace"),E=/^[ \t\n\r]/,m=T([" ","\t","\n","\r"],!1,!1),S=0,$=0,F=[{line:1,column:1}],w=0,R=[],k=0;if("startRule"in r){if(!(r.startRule in n))throw new Error("Can't start parsing from rule \""+r.startRule+'".');t=n[r.startRule]}function z(){return e.substring($,S)}function M(e,r){return{type:"literal",text:e,ignoreCase:r}}function T(e,r,s){return{type:"class",parts:e,inverted:r,ignoreCase:s}}function Z(e){return{type:"other",description:e}}function j(r){var s,o=F[r];if(o)return o;for(s=r-1;!F[s];)s--;for(o={line:(o=F[s]).line,column:o.column};s<r;)10===e.charCodeAt(s)?(o.line++,o.column=1):o.column++,s++;return F[r]=o,o}function D(e){S<w||(S>w&&(w=S,R=[]),R.push(e))}function U(){var r,s,n,t,p,c,x,l;if(r=S,(s=q())!==o){for(n=[],t=S,(p=I())!==o?(8853===e.charCodeAt(S)?(c="⊕",S++):(c=o,0===k&&D(i)),c===o&&(45===e.charCodeAt(S)?(c="-",S++):(c=o,0===k&&D(a))),c!==o&&(x=I())!==o&&(l=q())!==o?t=p=[p,c,x,l]:(S=t,t=o)):(S=t,t=o);t!==o;)n.push(t),t=S,(p=I())!==o?(8853===e.charCodeAt(S)?(c="⊕",S++):(c=o,0===k&&D(i)),c===o&&(45===e.charCodeAt(S)?(c="-",S++):(c=o,0===k&&D(a))),c!==o&&(x=I())!==o&&(l=q())!==o?t=p=[p,c,x,l]:(S=t,t=o)):(S=t,t=o);n!==o?($=r,r=s=n.reduce((function(e,r){return r[3].expression&&"⊕"===r[1]?J=e.expression?{expression:e.expression+"⊕"+r[3].expression,eval:e.eval+"^"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"⊕"+r[3].expression,eval:'dictionary["'+e+'"]^'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"⊕"===r[1]?J=e.expression?{expression:e.expression+"⊕"+r[3],eval:e.eval+'^dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"⊕"+r[3],eval:'dictionary["'+e+'"]^dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"-"===r[1]?J=e.expression?{expression:e.expression+"-"+r[3].expression,eval:"diferencia("+e.eval+","+r[3].eval+")",firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"-"+r[3].expression,eval:'diferencia(dictionary["'+e+'"],'+r[3].eval+")",firstPart:e,operator:r[1],secondPart:r[3].expression}:"-"===r[1]&&(J=e.expression?{expression:e.expression+"-"+r[3],eval:"diferencia("+e.eval+',dictionary["'+r[3]+'"])',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"-"+r[3],eval:'diferencia(dictionary["'+e+'"],dictionary["'+r[3]+'"])',firstPart:e,operator:r[1],secondPart:r[3]}),N(J),{expressions:K,variables:L,...J}}),s)):(S=r,r=o)}else S=r,r=o;return r}function q(){var r,s,n,t,i,a,x,l;if(r=S,(s=B())!==o){for(n=[],t=S,(i=I())!==o?(8596===e.charCodeAt(S)?(a="↔",S++):(a=o,0===k&&D(p)),a===o&&(8594===e.charCodeAt(S)?(a="→",S++):(a=o,0===k&&D(c))),a!==o&&(x=I())!==o&&(l=B())!==o?t=i=[i,a,x,l]:(S=t,t=o)):(S=t,t=o);t!==o;)n.push(t),t=S,(i=I())!==o?(8596===e.charCodeAt(S)?(a="↔",S++):(a=o,0===k&&D(p)),a===o&&(8594===e.charCodeAt(S)?(a="→",S++):(a=o,0===k&&D(c))),a!==o&&(x=I())!==o&&(l=B())!==o?t=i=[i,a,x,l]:(S=t,t=o)):(S=t,t=o);n!==o?($=r,r=s=n.reduce((function(e,r){return r[3].expression&&"↔"===r[1]?J=e.expression?{expression:e.expression+"↔"+r[3].expression,eval:"bicondicional("+e.eval+","+r[3].eval+")",firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"↔"+r[3].expression,eval:'bicondicional(dictionary["'+e+'"],'+r[3].eval+")",firstPart:e,operator:r[1],secondPart:r[3].expression}:"↔"===r[1]?J=e.expression?{expression:e.expression+"↔"+r[3],eval:"bicondicional("+e.eval+',dictionary["'+r[3]+'"])',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"↔"+r[3],eval:'bicondicional(dictionary["'+e+'"],dictionary["'+r[3]+'"])',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"→"===r[1]?J=e.expression?{expression:e.expression+"→"+r[3].expression,eval:"condicional("+e.eval+","+r[3].eval+")",firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"→"+r[3].expression,eval:'condicional(dictionary["'+e+'"],'+r[3].eval+")",firstPart:e,operator:r[1],secondPart:r[3].expression}:"→"===r[1]&&(J=e.expression?{expression:e.expression+"→"+r[3],eval:"condicional("+e.eval+',dictionary["'+r[3]+'"])',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"→"+r[3],eval:'condicional(dictionary["'+e+'"],dictionary["'+r[3]+'"])',firstPart:e,operator:r[1],secondPart:r[3]}),N(J),{expressions:K,variables:L,...J}}),s)):(S=r,r=o)}else S=r,r=o;return r}function B(){var r,s,n,t,i,a,p,c;if(r=S,(s=G())!==o){for(n=[],t=S,(i=I())!==o?(709===e.charCodeAt(S)?(a="˅",S++):(a=o,0===k&&D(x)),a===o&&(8899===e.charCodeAt(S)?(a="⋃",S++):(a=o,0===k&&D(l)),a===o&&(43===e.charCodeAt(S)?(a="+",S++):(a=o,0===k&&D(d)))),a!==o&&(p=I())!==o&&(c=G())!==o?t=i=[i,a,p,c]:(S=t,t=o)):(S=t,t=o);t!==o;)n.push(t),t=S,(i=I())!==o?(709===e.charCodeAt(S)?(a="˅",S++):(a=o,0===k&&D(x)),a===o&&(8899===e.charCodeAt(S)?(a="⋃",S++):(a=o,0===k&&D(l)),a===o&&(43===e.charCodeAt(S)?(a="+",S++):(a=o,0===k&&D(d)))),a!==o&&(p=I())!==o&&(c=G())!==o?t=i=[i,a,p,c]:(S=t,t=o)):(S=t,t=o);n!==o?($=r,r=s=n.reduce((function(e,r){return r[3].expression&&"˅"===r[1]?J=e.expression?{expression:e.expression+"˅"+r[3].expression,eval:e.eval+"|"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"˅"+r[3].expression,eval:'dictionary["'+e+'"]|'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"˅"===r[1]?J=e.expression?{expression:e.expression+"˅"+r[3],eval:e.eval+'|dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"˅"+r[3],eval:'dictionary["'+e+'"]|dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"⋃"===r[1]?J=e.expression?{expression:e.expression+"⋃"+r[3].expression,eval:e.eval+"|"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"⋃"+r[3].expression,eval:'dictionary["'+e+'"]|'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"⋃"===r[1]?J=e.expression?{expression:e.expression+"⋃"+r[3],eval:e.eval+'|dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"⋃"+r[3],eval:'dictionary["'+e+'"]|dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"+"===r[1]?J=e.expression?{expression:e.expression+"+"+r[3].expression,eval:e.eval+"|"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"+"+r[3].expression,eval:'dictionary["'+e+'"]|'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"+"===r[1]&&(J=e.expression?{expression:e.expression+"+"+r[3],eval:e.eval+'|dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"+"+r[3],eval:'dictionary["'+e+'"]|dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}),N(J),{expressions:K,variables:L,...J}}),s)):(S=r,r=o)}else S=r,r=o;return r}function G(){var r,s,n,t,i,a,p,c;if(r=S,(s=H())!==o){for(n=[],t=S,(i=I())!==o?(708===e.charCodeAt(S)?(a="˄",S++):(a=o,0===k&&D(u)),a===o&&(8898===e.charCodeAt(S)?(a="⋂",S++):(a=o,0===k&&D(f)),a===o&&(42===e.charCodeAt(S)?(a="*",S++):(a=o,0===k&&D(v)))),a!==o&&(p=I())!==o&&(c=H())!==o?t=i=[i,a,p,c]:(S=t,t=o)):(S=t,t=o);t!==o;)n.push(t),t=S,(i=I())!==o?(708===e.charCodeAt(S)?(a="˄",S++):(a=o,0===k&&D(u)),a===o&&(8898===e.charCodeAt(S)?(a="⋂",S++):(a=o,0===k&&D(f)),a===o&&(42===e.charCodeAt(S)?(a="*",S++):(a=o,0===k&&D(v)))),a!==o&&(p=I())!==o&&(c=H())!==o?t=i=[i,a,p,c]:(S=t,t=o)):(S=t,t=o);n!==o?($=r,r=s=n.reduce((function(e,r){return r[3].expression&&"˄"===r[1]?J=e.expression?{expression:e.expression+"˄"+r[3].expression,eval:e.eval+"&"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"˄"+r[3].expression,eval:'dictionary["'+e+'"]&'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"˄"===r[1]?J=e.expression?{expression:e.expression+"˄"+r[3],eval:e.eval+'&dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"˄"+r[3],eval:'dictionary["'+e+'"]&dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"⋂"===r[1]?J=e.expression?{expression:e.expression+"⋂"+r[3].expression,eval:e.eval+"&"+r[3].eval,firstPart:e.expression,operator:r[1],secondPart:r[3].expression}:{expression:e+"⋂"+r[3].expression,eval:'dictionary["'+e+'"]&'+r[3].eval,firstPart:e,operator:r[1],secondPart:r[3].expression}:"⋂"===r[1]?J=e.expression?{expression:e.expression+"⋂"+r[3],eval:e.eval+'&dictionary["'+r[3]+'"]',firstPart:e.expression,operator:r[1],secondPart:r[3]}:{expression:e+"⋂"+r[3],eval:'dictionary["'+e+'"]&dictionary["'+r[3]+'"]',firstPart:e,operator:r[1],secondPart:r[3]}:r[3].expression&&"*"===r[1]?J=e.expression?{expression:e.expression+r[3].expression,eval:e.eval+"&"+r[3].eval,firstPart:e.expression,operator:"",secondPart:r[3].expression}:{expression:e+r[3].expression,eval:'dictionary["'+e+'"]&'+r[3].eval,firstPart:e,operator:"",secondPart:r[3].expression}:"*"===r[1]&&(J=e.expression?{expression:e.expression+r[3],eval:e.eval+'&dictionary["'+r[3]+'"]',firstPart:e.expression,operator:"",secondPart:r[3]}:{expression:e+r[3],eval:'dictionary["'+e+'"]&dictionary["'+r[3]+'"]',firstPart:e,operator:"",secondPart:r[3]}),N(J),{expressions:K,variables:L,...J}}),s)):(S=r,r=o)}else S=r,r=o;return r}function H(){var r,s,n,t,i,a,p;if(r=S,(s=function(){var r,s,n,t,i;return r=S,40===e.charCodeAt(S)?(s="(",S++):(s=o,0===k&&D(h)),s!==o&&I()!==o&&(n=U())!==o&&I()!==o?(41===e.charCodeAt(S)?(t=")",S++):(t=o,0===k&&D(y)),t!==o?($=r,J=(i=n).expression?{expression:"("+i.expression+")",eval:"("+i.eval+")"}:{expression:"("+i+")",eval:'(dictionary["'+i+'"])'},r=s={expressions:K,variables:L,...J}):(S=r,r=o)):(S=r,r=o),r===o&&(r=function(){var r,s;return k++,r=S,I()!==o?(A.test(e.charAt(S))?(s=e.charAt(S),S++):(s=o,0===k&&D(C)),s!==o?($=r,L.variables.includes(z())||(L.variables.push(z()),L.dictionary[z()]=0),r=z()):(S=r,r=o)):(S=r,r=o),k--,r===o&&0===k&&D(g),r}()),r}())!==o){for(n=[],t=S,(i=I())!==o?(180===e.charCodeAt(S)?(a="´",S++):(a=o,0===k&&D(P)),a!==o&&(p=I())!==o?t=i=[i,a,p]:(S=t,t=o)):(S=t,t=o);t!==o;)n.push(t),t=S,(i=I())!==o?(180===e.charCodeAt(S)?(a="´",S++):(a=o,0===k&&D(P)),a!==o&&(p=I())!==o?t=i=[i,a,p]:(S=t,t=o)):(S=t,t=o);n!==o?($=r,r=s=n.reduce((function(e,r){return"´"===r[1]&&(J=e.expression?{expression:e.expression+"´",eval:"not("+e.eval+")",firstPart:e.expression,operator:r[1],secondPart:""}:{expression:e+"´",eval:'not(dictionary["'+e+'"])',firstPart:e,operator:r[1],secondPart:""}),N(J),{expressions:K,variables:L,...J}}),s)):(S=r,r=o)}else S=r,r=o;return r}function I(){var r,s;for(k++,r=[],E.test(e.charAt(S))?(s=e.charAt(S),S++):(s=o,0===k&&D(m));s!==o;)r.push(s),E.test(e.charAt(S))?(s=e.charAt(S),S++):(s=o,0===k&&D(m));return k--,r===o&&(s=o,0===k&&D(b)),r}let J,K=[],L={variables:[],dictionary:[]};function N(e){K.some(r=>r.expression===e.expression)||K.push(e)}if((s=t())!==o&&S===e.length)return s;throw s!==o&&S<e.length&&D({type:"end"}),O=R,Q=w<e.length?e.charAt(w):null,X=w<e.length?w+1:w,Y=j(W=w),_=j(X),V={start:{offset:W,line:Y.line,column:Y.column},end:{offset:X,line:_.line,column:_.column}},new peg$SyntaxError(peg$SyntaxError.buildMessage(O,Q),O,Q,V);var O,Q,V,W,X,Y,_}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(e,r){var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var r,s="";for(r=0;r<e.parts.length;r++)s+=e.parts[r]instanceof Array?t(e.parts[r][0])+"-"+t(e.parts[r][1]):t(e.parts[r]);return"["+(e.inverted?"^":"")+s+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function o(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+o(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+o(e)}))}function t(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+o(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+o(e)}))}return"Expected "+function(e){var r,o,n,t=new Array(e.length);for(r=0;r<e.length;r++)t[r]=s[(n=e[r]).type](n);if(t.sort(),t.length>0){for(r=1,o=1;r<t.length;r++)t[r-1]!==t[r]&&(t[o]=t[r],o++);t.length=o}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(r)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};